@using System;
@using Sandbox;
@using Sandbox.UI;

@namespace Facepunch.Boomer.UI

<style>
    InputHint
    {
        img
        {
            background-size: contain;
            background-repeat: no-repeat;
            height: 100%;
        }
    }
</style>

<root>
    <img @ref=Glyph />
</root>

@code
{
    // @ref
    public Image Glyph { get; set; }
    public GlyphStyle GlyphStyle { get; set; } = GlyphStyle.Dark.WithSolidABXY().WithNeutralColorABXY();
    public InputButton Button { get; set; } = InputButton.Use;

    /// <summary>
    /// Checks the current button and updates the glyph.
    /// </summary>
    void UpdateTexture()
    {
        var texture = Input.GetGlyph( Button, InputGlyphSize.Medium, GlyphStyle );
        if ( texture is null ) return;
        Glyph.Texture = texture;
    }

    protected override void OnAfterTreeRender( bool firstTime )
    {
        UpdateTexture();
    }

    protected override int BuildHash()
    {
        // If we switch input device, rebuild the tree.
        return HashCode.Combine( Button, Input.UsingController );
    }
}