@using System;
@using Sandbox;
@using Sandbox.UI;
@using Facepunch.Boomer.WeaponSystem;

@namespace Facepunch.Boomer.UI
@inherits Panel

<style>
    KillFeedEntry
    {
        justify-content: space-between;
        align-items: center;
        font-size: 15px;
        font-family: Quantico;
        font-weight: 700;
        color: white;
        background-color: rgba( 0, 0, 0, 0.65 );
        backdrop-filter: blur( 5px );
        box-shadow: 5px 5px 30px rgba( 0, 0, 0, 0.5 );
        max-height: 40px;
        border-radius: 2px;
        padding: 12px;

        .attacker, .victim {
            text-shadow: 0px 0px 2px rgba( 0, 0, 0, 0.3 );
        }

        .weapon
        {
            padding-left: 12px;
            padding-right: 12px;

            align-items: center;
            .icon
            {
                background-size: cover;
                background-repeat: no-repeat;
                height: 38px;
                aspect-ratio: 1;
            }

            label {
                font-size: 16px;
                text-shadow: 0px 0px 6px darken( @Data.WeaponColor.WithAlpha( 0.5f ).Hex, 50% );
                color: linear-gradient( to bottom, darken( @Data.WeaponColor.Hex, 0% ), darken( @Data.WeaponColor.Hex, 40% ) );
            }
        }
    }
</style>

<root>
    <label class="attacker">@AttackerName</label>

    <div class="weapon">
        @if ( HasData )
        {
            <img class="icon" src=@Data.AmmoIcon />
            <label>@Data.GetRandomKillMessage()</label>
        }
    </div>

    <label class="victim">@VictimName</label>
</root>

@code
{
    public string AttackerName { get; set; } = "DevulTj";
    public string VictimName { get; set; } = "bakscratch";
    public string WeaponIdent { get; set; } = "Sniper Rifle";

    public WeaponData Data => WeaponData.FindName( WeaponIdent );
    public bool HasData => !string.IsNullOrEmpty( WeaponIdent ) && Data != null;

    public override int GetHashCode()
    {
        return HashCode.Combine( AttackerName, VictimName, WeaponIdent );
    }
}